<!DOCTYPE html>
<html>
<head>
  <title>ランニング企画</title>
  <script>
    window.onload = function () {
      generateRunningPlan();
    };
    function generateRunningPlan() {
      var now = new Date();
      var currentYear = now.getFullYear();
      var currentMonth = now.getMonth();
      var nextMonth = (currentMonth + 1) % 12; // 来月のインデックス

      var firstDayOfCurrentMonth = new Date(currentYear, currentMonth, 1);
      var firstWednesdayOfCurrentMonth = new Date(currentYear, currentMonth, 1 + ((3 - firstDayOfCurrentMonth.getDay() + 7) % 7));
      var secondWednesdayOfCurrentMonth = new Date(currentYear, currentMonth, firstWednesdayOfCurrentMonth.getDate() + 7);

      var firstDayOfNextMonth = new Date(currentYear, nextMonth, 1);
      var firstWednesdayOfNextMonth = new Date(currentYear, nextMonth, 1 + ((3 - firstDayOfNextMonth.getDay() + 7) % 7));
      var secondWednesdayOfNextMonth = new Date(currentYear, nextMonth, firstWednesdayOfNextMonth.getDate() + 7);

      var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      var formattedDateCurrentMonth = secondWednesdayOfCurrentMonth.toLocaleDateString('ja-JP', options);
      var formattedDateNextMonth = secondWednesdayOfNextMonth.toLocaleDateString('ja-JP', options);

      var prefix = "次のランニングは\n";
      var suffix = " に\n代々木公園で開催されます🏃\n\n下記リアクションで\n表明お願いします🙇\n❤️：参加 (ほぼ100%行ける)\n👍：参加 (多分)(70%ぐらい行ける)\n😮：不参加(保留)(調整中）\n😢：不参加(90%以上行けない)"

      var runningPlan1Element = document.getElementById("running-plan1");
      var runningPlan2Element = document.getElementById("running-plan2");
      runningPlan1Element.value = prefix + formattedDateCurrentMonth + suffix;

      runningPlan2Element.value = prefix + formattedDateNextMonth + suffix;
    }

    function copyRunningPlan(i) {
      var runningPlanElement = document.getElementById("running-plan" + i);
      runningPlanElement.select();
      document.execCommand("copy");

      alert("ランニング日がコピーされました.");
    }

  </script>
</head>
<body>
  <h2>ランニング企画</h2>
  <h3>今月</h3>
  <button onclick="copyRunningPlan(1)">コピー</button>
  <textarea id="running-plan1" readonly style="width: 100%; height: 200px;"></textarea>
  <br>
  <br>
  <br>
  <h3>来月</h3>
  <button onclick="copyRunningPlan(2)">コピー</button>

  <textarea id="running-plan2" readonly style="width: 100%; height: 200px;"></textarea>
  <br>
</body>
</html>
